#!/bin/bash

CLIENT_ID=''
SECRET=''


TOKEN=$(curl \
          --silent \
          https://api-m.sandbox.paypal.com/v1/oauth2/token \
          -H "Accept: application/json" \
          -H "Accept-Language: en_US" \
          -u "${CLIENT_ID}:${SECRET}" \
          -d "grant_type=client_credentials" | jq '.access_token' -r)


# NAMES=$(curl \
#           --silent \
#           -X GET https://api-m.sandbox.paypal.com/v1/notifications/webhooks-event-types \
#           -H "Content-Type: application/json" \
#           -H "Authorization: Bearer ${TOKEN}" | jq -r '.event_types | .[].name ')

NAMES="BILLING.PLAN.ACTIVATED BILLING.PLAN.CREATED BILLING.PLAN.DEACTIVATED BILLING.PLAN.PRICING-CHANGE.ACTIVATED BILLING.PLAN.PRICING-CHANGE.INPROGRESS BILLING.PLAN.UPDATED BILLING.SUBSCRIPTION.ACTIVATED BILLING.SUBSCRIPTION.CANCELLED BILLING.SUBSCRIPTION.CREATED BILLING.SUBSCRIPTION.EXPIRED BILLING.SUBSCRIPTION.PAYMENT.FAILED BILLING.SUBSCRIPTION.RE-ACTIVATED BILLING.SUBSCRIPTION.RENEWED BILLING.SUBSCRIPTION.SUSPENDED BILLING.SUBSCRIPTION.UPDATED CATALOG.PRODUCT.CREATED CATALOG.PRODUCT.UPDATED CHECKOUT.CHECKOUT.BUYER-APPROVED CHECKOUT.ORDER.APPROVED CHECKOUT.ORDER.COMPLETED CHECKOUT.ORDER.SAVED CHECKOUT.ORDER.VOIDED COMPLIANCE.PROCESS.AGENT-ACTION-INITIATED COMPLIANCE.PROCESS.COMPLETED COMPLIANCE.PROCESS.END-USER-ACTION-REQUIRED COMPLIANCE.PROCESS.EXEMPTED COMPLIANCE.PROCESS.FAILED COMPLIANCE.PROCESS.NOT-APPLIED COMPLIANCE.PROCESS.SYSTEM-ACTION-INITIATED CUSTOMER.DISPUTE.CREATED CUSTOMER.DISPUTE.RESOLVED CUSTOMER.DISPUTE.UPDATED CUSTOMER.MANAGED-ACCOUNT.CREATED CUSTOMER.MANAGED-ACCOUNT.RISK-ASSESSED CUSTOMER.MANAGED-ACCOUNT.UPDATED CUSTOMER.MERCHANT-INTEGRATION.CAPABILITY-UPDATED CUSTOMER.MERCHANT-INTEGRATION.PRODUCT-SUBSCRIPTION-UPDATED CUSTOMER.MERCHANT-INTEGRATION.SELLER-ALREADY-INTEGRATED CUSTOMER.MERCHANT-INTEGRATION.SELLER-CONSENT-GRANTED CUSTOMER.MERCHANT-INTEGRATION.SELLER-EMAIL-CONFIRMED CUSTOMER.MERCHANT-INTEGRATION.SELLER-ERROR-BAD-REQUEST CUSTOMER.MERCHANT-INTEGRATION.SELLER-ERROR-CONFLICT CUSTOMER.MERCHANT-INTEGRATION.SELLER-ERROR-INTERNAL-SERVER-ERROR CUSTOMER.MERCHANT-INTEGRATION.SELLER-ERROR-SERVER-UNAVAILABLE CUSTOMER.MERCHANT-INTEGRATION.SELLER-ERROR-UNAUTHORISED CUSTOMER.MERCHANT-INTEGRATION.SELLER-ONBOARDING-INITIATED CUSTOMER.MERCHANT-INTEGRATION.SELLER-ONBOARDING-STARTED CUSTOMER.PAYOUT.COMPLETED CUSTOMER.PAYOUT.FAILED CUSTOMER.USER-PROFILE.PASSWORD-CHANGED IDENTITY.AUTHORIZATION-CONSENT.GRANTED IDENTITY.AUTHORIZATION-CONSENT.REVOKED INVOICING.INVOICE.CANCELLED INVOICING.INVOICE.CREATED INVOICING.INVOICE.PAID INVOICING.INVOICE.REFUNDED INVOICING.INVOICE.SCHEDULED INVOICING.INVOICE.UPDATED MERCHANT.ONBOARDING.COMPLETED MERCHANT.PARTNER-CONSENT.REVOKED PAYMENT-NETWORKS.ALTERNATIVE-PAYMENT.COMPLETED PAYMENT.AUTHORIZATION.CREATED PAYMENT.AUTHORIZATION.VOIDED PAYMENT.CAPTURE.COMPLETED PAYMENT.CAPTURE.DENIED PAYMENT.CAPTURE.PENDING PAYMENT.CAPTURE.REFUNDED PAYMENT.CAPTURE.REVERSED PAYMENT.ORDER.CANCELLED PAYMENT.ORDER.CREATED PAYMENT.PAYOUTS-ITEM.BLOCKED PAYMENT.PAYOUTS-ITEM.CANCELED PAYMENT.PAYOUTS-ITEM.DENIED PAYMENT.PAYOUTS-ITEM.FAILED PAYMENT.PAYOUTS-ITEM.HELD PAYMENT.PAYOUTS-ITEM.REFUNDED PAYMENT.PAYOUTS-ITEM.RETURNED PAYMENT.PAYOUTS-ITEM.SUCCEEDED PAYMENT.PAYOUTS-ITEM.UNCLAIMED PAYMENT.PAYOUTSBATCH.DENIED PAYMENT.PAYOUTSBATCH.PROCESSING PAYMENT.PAYOUTSBATCH.SUCCESS PAYMENT.REFUND.COMPLETED PAYMENT.SALE.COMPLETED PAYMENT.SALE.DENIED PAYMENT.SALE.PENDING PAYMENT.SALE.REFUNDED PAYMENT.SALE.REVERSED PAYMENTS.PAYMENT.CREATED PAYMENT_NETWORKS.INSTRUMENT.LINKED-ACCOUNT-UPDATED VAULT.CREDIT-CARD.CREATED VAULT.CREDIT-CARD.DELETED VAULT.CREDIT-CARD.UPDATED VAULT.PAYMENT-TOKEN.CREATED VAULT.PAYMENT-TOKEN.DELETED VAULT.PAYMENT-TOKEN.DELETION-INITIATED"

for name in ${NAMES}; do

  echo ${name}

  curl \
    --silent \
    -X POST https://api-m.sandbox.paypal.com/v1/notifications/simulate-event \
    -H "Content-Type: application/json" \
    -H "Authorization: Bearer ${TOKEN}" \
    -d '{
      "url": "https://example.com/example_webhook",
        "event_type": "'${name}'",
        "resource_version": "1.0"

}' | jq > "${name}.v1.json"
  sleep 5


  curl \
    --silent \
    -X POST https://api-m.sandbox.paypal.com/v1/notifications/simulate-event \
    -H "Content-Type: application/json" \
    -H "Authorization: Bearer ${TOKEN}" \
    -d '{
      "url": "https://example.com/example_webhook",
        "event_type": "'${name}'",
        "resource_version": "2.0"

}' | jq > "${name}.v2.json"
  sleep 5


done
